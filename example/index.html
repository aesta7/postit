<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>PostIt</title>
	</head>

	<body>
		<button id="postIt">PostIt</button>

		<iframe src="iframe.html" width="300" height="300"></iframe>

		<!-- Scripts -->
		<script src="../dist/postit.js"></script>
		<script>
			(function() {
				'use strict';

				/**
				 * @note Always specify a more explicit target `origin`, not `*`, when utilizing `.postMessage`, to send data.
				 */

				var postItElem = document.getElementById('postIt');

				PostIt
					// Creates and manages a `foo` instance.
					.add('foo')

					// Registers an event listener for a `bar` event, to a `foo` instance.
					.on('foo', 'bar', function(event) {
						postItElem.innerHTML = event.dataParsed.message;

						// Emits a `baz` event to registered event listeners for an `baz` event, to a `foo` instance.
						PostIt.emit('foo', 'baz', event.source, { message: 'Message from `index.html`' }, '*');
					})

					// Registers an event `listener` for all `foo` instance events, to a `foo` instance.
					.on('foo', '*', function(event) {
						console.log('All `.postMessage` events', event.dataParsed);
					});

				postItElem.addEventListener('click', function() {
					PostIt.openWindow('window.html', 'PostIt', {
						width: 700,
						height: 500
					});
				}, false);
			})();
		</script>
	</body>
</html>
