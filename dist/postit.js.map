{"version":3,"sources":["manager.js"],"names":["e","exports","module","define","amd","f","window","global","self","PostIt","t","n","r","s","o","u","a","require","i","Error","call","length",1,"_dereq_","instances","Factory","create","id","instance","destroy","get","getAll","./postit",2,"helpers","Manager","add","that","this","console","error","remove","record","event","listeners","off","removeAll","records","size","on","listener","emit","target","message","origin","openWindow","options","./factory","./helpers",3,"serialize","params","_params","param","push","join","shallowMerge","destination","source","prop","nativeScreen","screen","nativeWindow","nativeDocument","document","nativeDocumentElement","documentElement","dualScreenLeft","screenLeft","left","dualScreenTop","screenTop","top","width","innerWidth","clientWidth","height","innerHeight","clientHeight","features","newWindow","open","url","title","focus",4,"token","prototype","wrapListener","evt","data","test","JSON","parse","err","dataParsed","__event","__id","__origin","indexOf","__token","addEventListener","removeEventListener","splice","eventOrigin","location","href","Object","toString","stringify","__value","postMessage"],"mappings":"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","file":"postit.js","sourcesContent":["!function(e){if(\"object\"==typeof exports)module.exports=e();else if(\"function\"==typeof define&&define.amd)define(e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.PostIt=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n'use strict';\n\nvar PostIt = _dereq_('./postit');\nvar instances = {};\n\n/**\n * Factory Module.\n * @public\n */\n\nvar Factory = module.exports = {};\n\n/**\n * Creates a `PostIt` factory (Singleton).\n * @param {string} id\n * @returns {object}\n * @public\n */\n\nFactory.create = function (id) {\n\tvar instance = instances[id];\n\n\t// If a given `instance` is found, use it and RETURN EARLY.\n\tif (instance) {\n\t\treturn instance;\n\t}\n\n\t// Otherwise, create a new `instance` and store it.\n\treturn (instances[id] = new PostIt(id));\n};\n\n/**\n * Destroys an explicit `PostIt`, factory instance.\n * @param {string} id\n * @returns {void}\n * @public\n */\n\nFactory.destroy = function (id) {\n\tdelete instances[id];\n};\n\n/**\n * Gets an explicit `PostIt`, factory instance.\n * @param {string} id\n * @returns {object}\n * @public\n */\n\nFactory.get = function (id) {\n\treturn instances[id];\n};\n\n/**\n * Gets all `PostIt`, factory instances.\n * @returns {object}\n * @public\n */\n\nFactory.getAll = function () {\n\treturn instances;\n};\n\n},{\"./postit\":4}],2:[function(_dereq_,module,exports){\n'use strict';\n\nvar Factory = _dereq_('./factory');\nvar helpers = _dereq_('./helpers');\n\n/**\n * Manager Module.\n * @public\n */\n\nvar Manager = module.exports = {};\n\n/**\n * Creates and manages a new `PostIt` instance.\n * @param {string} id\n * @returns {object}\n * @public\n */\n\nManager.add = function (id) {\n\tvar that = this;\n\n\tif ('string' !== typeof id) {\n\t\tconsole.error(id + ' should be a `String`.');\n\n\t\treturn that;\n\t}\n\n\t// Create a memoized factory.\n\tFactory.create(id);\n\n\treturn that;\n};\n\n/**\n * Removes an explicit `PostIt` instance.\n * @param {string} id\n * @returns {object}\n * @public\n */\n\nManager.remove = function (id) {\n\tvar that = this;\n\tvar record = that.get(id);\n\n\tif (!record) {\n\t\treturn that;\n\t}\n\n\t// Remove listeners to avoid memory leaks.\n\tfor (var event in record.listeners) {\n\t\trecord.off(event);\n\t}\n\n\tFactory.destroy(id);\n\n\treturn that;\n};\n\n/**\n * Removes all `PostIt` instances.\n * @return {object}\n * @public\n */\n\nManager.removeAll = function () {\n\tvar that = this;\n\tvar records = that.getAll();\n\n\tfor (var record in records) {\n\t\tthat.remove(record);\n\t}\n\n\treturn that;\n};\n\n/**\n * Returns the length of all `PostIt` instances.\n * @return {number}\n * @public\n */\n\nManager.size = function () {\n\tvar size = 0;\n\tvar records = this.getAll();\n\n\tfor (var record in records) {\n\t\tsize++;\n\t}\n\n\treturn size;\n};\n\n/**\n * Gets an explicit `PostIt` instance.\n * @param {string} id\n * @returns {object|void}\n */\n\nManager.get = function (id) {\n\treturn Factory.get(id) || console.error(id + ' does not match any `PostIt` instances.');\n};\n\n/**\n * Gets all `PostIt` instances.\n * @returns {object}\n */\n\nManager.getAll = function () {\n\treturn Factory.getAll();\n};\n\n/**\n * @see {@link postit.md#PostIt+on} for further information (signature, etc.).\n * @param {string} id\n * @returns {object}\n * @public\n */\n\nManager.on = function (id, event, listener) {\n\tvar that = this;\n\tvar record = that.get(id);\n\n\tif (!record) {\n\t\treturn that;\n\t}\n\n\trecord.on(event, listener);\n\n\treturn that;\n};\n\n/**\n * @see {@link postit.md#PostIt+off} for further information (signature, etc.).\n * @param {string} id\n * @returns {object}\n * @public\n */\n\nManager.off = function (id, event, listener) {\n\tvar that = this;\n\tvar record = that.get(id);\n\n\tif (!record) {\n\t\treturn that;\n\t}\n\n\trecord.off(event, listener);\n\n\treturn that;\n};\n\n/**\n * @see {@link postit.md#PostIt+emit} for further information (signature, etc.).\n * @param {string} id\n * @returns {object}\n * @public\n */\n\nManager.emit = function (id, event, target, message, origin) {\n\tvar that = this;\n\tvar record = that.get(id);\n\n\tif (!record) {\n\t\treturn that;\n\t}\n\n\trecord.emit(event, target, message, origin);\n\n\treturn that;\n};\n\n/**\n * @see {@link helpers.md#helpers.openWindow} for further information (signature, etc.).\n * @public\n */\n\nManager.openWindow = function (options) {\n\treturn helpers.openWindow(options || {});\n};\n\n},{\"./factory\":1,\"./helpers\":3}],3:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Helpers Module.\n * @public\n */\n\nvar helpers = module.exports = {};\n\n/**\n * Serialize an object into a formatted string.\n * @param {object} params\n * @returns {string}\n * @public\n */\n\nhelpers.serialize = function (params) {\n\tvar _params = [];\n\n\tfor (var param in params) {\n\t\t_params.push(param + '=' + params[param]);\n\t}\n\n\treturn _params.join(', ');\n};\n\n/**\n * Merges a shallow `source` object into the `destination` object.\n * @param {object} destination\n * @param {object} source\n * @returns {object}\n * @public\n */\n\nhelpers.shallowMerge = function (destination, source) {\n\tfor (var prop in source) {\n\t\tif (null != source[prop]) {\n\t\t\tdestination[prop] = source[prop];\n\t\t}\n\t}\n\n\treturn destination;\n};\n\n/**\n * Loads a resource into a new browsing context (`window`).\n * @param {object} options\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Window/open|Window.open()} for more options.\n * @param {string} options.url\n * @param {string} options.title\n * @param {number} options.width\n * @param {number} options.height\n * @returns {object}\n * @public\n */\n\n/* istanbul ignore next */\nhelpers.openWindow = function (options) {\n\tvar that = this;\n\tvar nativeScreen = screen || {};\n\tvar nativeWindow = window;\n\tvar nativeDocument = document;\n\tvar nativeDocumentElement = nativeDocument.documentElement || {};\n\tvar dualScreenLeft = nativeWindow.screenLeft || nativeScreen.left || 0;\n\tvar dualScreenTop = nativeWindow.screenTop || nativeScreen.top || 0;\n\tvar width = nativeWindow.innerWidth || nativeDocumentElement.clientWidth || nativeScreen.width || 0;\n\tvar height = nativeWindow.innerHeight || nativeDocumentElement.clientHeight || nativeScreen.height || 0;\n\tvar left = ((width / 2) - (options.width / 2)) + dualScreenLeft;\n\tvar top = ((height / 2) - (options.height / 2)) + dualScreenTop;\n\tvar features = that.serialize(that.shallowMerge({\n\t\ttop: top,\n\t\tleft: left\n\t}, options));\n\tvar newWindow = nativeWindow.open(options.url, options.title, features);\n\n\tif (nativeWindow.focus) {\n\t\tnewWindow.focus();\n\t}\n\n\treturn newWindow;\n};\n\n},{}],4:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * PostIt Module.\n * @constructor\n * @param {string} id\n * @public\n */\n\nvar PostIt = module.exports = function (id) {\n\tthis.id = id;\n\tthis.token = 0;\n\tthis.listeners = {};\n};\n\n/**\n * Registers `.postMessage` event listeners.\n * @param {string} event\n * @param {function} listener\n * @returns {object}\n * @public\n */\n\nPostIt.prototype.on = function (event, listener) {\n\tvar that = this;\n\n\tthat.listeners[event] = that.listeners[event] || [];\n\n\tvar wrapListener = function (evt) {\n\t\tvar data = null;\n\n\t\tif (/__event\\s?\"/.test(evt.data)) {\n\t\t\ttry {\n\t\t\t\tdata = JSON.parse(evt.data);\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(err);\n\n\t\t\t\tdata = {};\n\t\t\t}\n\n\t\t\tevt.dataParsed = data;\n\t\t}\n\n\t\tif ('*' === event) {\n\t\t\treturn listener.call(this, evt);\n\t\t}\n\n\t\tif (!data ||\n\t\t\tevent !== data.__event ||\n\t\t\tthat.id !== data.__id ||\n\t\t\t'null' !== evt.origin && -1 === data.__origin.indexOf(evt.origin)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tlistener.call(this, evt);\n\t};\n\n\tlistener.__token = wrapListener.__token = that.token++;\n\n\twindow.addEventListener('message', wrapListener, false);\n\tthat.listeners[event].push(wrapListener);\n\n\treturn that;\n};\n\n/**\n * Unregisters (all | explicit) `.postMessage` event listeners.\n * @param {string} event\n * @param {function=} listener\n * @returns {object}\n * @public\n */\n\nPostIt.prototype.off = function (event, listener) {\n\tvar that = this;\n\tvar listeners = that.listeners[event] || [];\n\n\tfor (var i = 0; i < listeners.length; ++i) {\n\t\tif (!listener || listener.__token === listeners[i].__token) {\n\t\t\twindow.removeEventListener('message', listeners[i], false);\n\t\t\tlisteners.splice(i, 1);\n\n\t\t\t--i;\n\t\t}\n\t}\n\n\treturn that;\n};\n\n/**\n * Emits explicit `message` events, using the client's `.postMessage` emitter.\n * @param {string} event\n * @param {object} target\n * @param {string|array|object} message\n * @param {string} origin\n * @returns {object}\n * @public\n */\n\nPostIt.prototype.emit = function (event, target, message, origin) {\n\tvar that = this;\n\tvar eventOrigin = window.location.href;\n\n\tswitch (Object.prototype.toString.call(message)) {\n\t\tcase '[object Function]':\n\t\t\tconsole.error(message + ' should either be an `Object`, `Array` or `String`.');\n\n\t\t\treturn that;\n\n\t\tcase '[object Object]':\n\t\t\tmessage.__id = that.id;\n\t\t\tmessage.__event = event;\n\t\t\tmessage.__origin = eventOrigin;\n\t\t\tmessage = JSON.stringify(message);\n\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tmessage = JSON.stringify({\n\t\t\t\t__value: message,\n\t\t\t\t__id: that.id,\n\t\t\t\t__event: event,\n\t\t\t\t__origin: eventOrigin\n\t\t\t});\n\t}\n\n\ttarget.postMessage(message, origin);\n\n\treturn that;\n};\n\n},{}]},{},[2])\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kY29vcGVyL0Rlc2t0b3AvcG9zdGl0L25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9Vc2Vycy9kY29vcGVyL0Rlc2t0b3AvcG9zdGl0L2xpYi9mYWN0b3J5LmpzIiwiL1VzZXJzL2Rjb29wZXIvRGVza3RvcC9wb3N0aXQvbGliL2Zha2VfN2U1ZWJkN2UuanMiLCIvVXNlcnMvZGNvb3Blci9EZXNrdG9wL3Bvc3RpdC9saWIvaGVscGVycy5qcyIsIi9Vc2Vycy9kY29vcGVyL0Rlc2t0b3AvcG9zdGl0L2xpYi9wb3N0aXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIil9dmFyIGY9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sZixmLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIid1c2Ugc3RyaWN0JztcblxudmFyIFBvc3RJdCA9IHJlcXVpcmUoJy4vcG9zdGl0Jyk7XG52YXIgaW5zdGFuY2VzID0ge307XG5cbi8qKlxuICogRmFjdG9yeSBNb2R1bGUuXG4gKiBAcHVibGljXG4gKi9cblxudmFyIEZhY3RvcnkgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBgUG9zdEl0YCBmYWN0b3J5IChTaW5nbGV0b24pLlxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcmV0dXJucyB7b2JqZWN0fVxuICogQHB1YmxpY1xuICovXG5cbkZhY3RvcnkuY3JlYXRlID0gZnVuY3Rpb24gKGlkKSB7XG5cdHZhciBpbnN0YW5jZSA9IGluc3RhbmNlc1tpZF07XG5cblx0Ly8gSWYgYSBnaXZlbiBgaW5zdGFuY2VgIGlzIGZvdW5kLCB1c2UgaXQgYW5kIFJFVFVSTiBFQVJMWS5cblx0aWYgKGluc3RhbmNlKSB7XG5cdFx0cmV0dXJuIGluc3RhbmNlO1xuXHR9XG5cblx0Ly8gT3RoZXJ3aXNlLCBjcmVhdGUgYSBuZXcgYGluc3RhbmNlYCBhbmQgc3RvcmUgaXQuXG5cdHJldHVybiAoaW5zdGFuY2VzW2lkXSA9IG5ldyBQb3N0SXQoaWQpKTtcbn07XG5cbi8qKlxuICogRGVzdHJveXMgYW4gZXhwbGljaXQgYFBvc3RJdGAsIGZhY3RvcnkgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQHB1YmxpY1xuICovXG5cbkZhY3RvcnkuZGVzdHJveSA9IGZ1bmN0aW9uIChpZCkge1xuXHRkZWxldGUgaW5zdGFuY2VzW2lkXTtcbn07XG5cbi8qKlxuICogR2V0cyBhbiBleHBsaWNpdCBgUG9zdEl0YCwgZmFjdG9yeSBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHJldHVybnMge29iamVjdH1cbiAqIEBwdWJsaWNcbiAqL1xuXG5GYWN0b3J5LmdldCA9IGZ1bmN0aW9uIChpZCkge1xuXHRyZXR1cm4gaW5zdGFuY2VzW2lkXTtcbn07XG5cbi8qKlxuICogR2V0cyBhbGwgYFBvc3RJdGAsIGZhY3RvcnkgaW5zdGFuY2VzLlxuICogQHJldHVybnMge29iamVjdH1cbiAqIEBwdWJsaWNcbiAqL1xuXG5GYWN0b3J5LmdldEFsbCA9IGZ1bmN0aW9uICgpIHtcblx0cmV0dXJuIGluc3RhbmNlcztcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBGYWN0b3J5ID0gcmVxdWlyZSgnLi9mYWN0b3J5Jyk7XG52YXIgaGVscGVycyA9IHJlcXVpcmUoJy4vaGVscGVycycpO1xuXG4vKipcbiAqIE1hbmFnZXIgTW9kdWxlLlxuICogQHB1YmxpY1xuICovXG5cbnZhciBNYW5hZ2VyID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuZCBtYW5hZ2VzIGEgbmV3IGBQb3N0SXRgIGluc3RhbmNlLlxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcmV0dXJucyB7b2JqZWN0fVxuICogQHB1YmxpY1xuICovXG5cbk1hbmFnZXIuYWRkID0gZnVuY3Rpb24gKGlkKSB7XG5cdHZhciB0aGF0ID0gdGhpcztcblxuXHRpZiAoJ3N0cmluZycgIT09IHR5cGVvZiBpZCkge1xuXHRcdGNvbnNvbGUuZXJyb3IoaWQgKyAnIHNob3VsZCBiZSBhIGBTdHJpbmdgLicpO1xuXG5cdFx0cmV0dXJuIHRoYXQ7XG5cdH1cblxuXHQvLyBDcmVhdGUgYSBtZW1vaXplZCBmYWN0b3J5LlxuXHRGYWN0b3J5LmNyZWF0ZShpZCk7XG5cblx0cmV0dXJuIHRoYXQ7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgYW4gZXhwbGljaXQgYFBvc3RJdGAgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEByZXR1cm5zIHtvYmplY3R9XG4gKiBAcHVibGljXG4gKi9cblxuTWFuYWdlci5yZW1vdmUgPSBmdW5jdGlvbiAoaWQpIHtcblx0dmFyIHRoYXQgPSB0aGlzO1xuXHR2YXIgcmVjb3JkID0gdGhhdC5nZXQoaWQpO1xuXG5cdGlmICghcmVjb3JkKSB7XG5cdFx0cmV0dXJuIHRoYXQ7XG5cdH1cblxuXHQvLyBSZW1vdmUgbGlzdGVuZXJzIHRvIGF2b2lkIG1lbW9yeSBsZWFrcy5cblx0Zm9yICh2YXIgZXZlbnQgaW4gcmVjb3JkLmxpc3RlbmVycykge1xuXHRcdHJlY29yZC5vZmYoZXZlbnQpO1xuXHR9XG5cblx0RmFjdG9yeS5kZXN0cm95KGlkKTtcblxuXHRyZXR1cm4gdGhhdDtcbn07XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwgYFBvc3RJdGAgaW5zdGFuY2VzLlxuICogQHJldHVybiB7b2JqZWN0fVxuICogQHB1YmxpY1xuICovXG5cbk1hbmFnZXIucmVtb3ZlQWxsID0gZnVuY3Rpb24gKCkge1xuXHR2YXIgdGhhdCA9IHRoaXM7XG5cdHZhciByZWNvcmRzID0gdGhhdC5nZXRBbGwoKTtcblxuXHRmb3IgKHZhciByZWNvcmQgaW4gcmVjb3Jkcykge1xuXHRcdHRoYXQucmVtb3ZlKHJlY29yZCk7XG5cdH1cblxuXHRyZXR1cm4gdGhhdDtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbGVuZ3RoIG9mIGFsbCBgUG9zdEl0YCBpbnN0YW5jZXMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKiBAcHVibGljXG4gKi9cblxuTWFuYWdlci5zaXplID0gZnVuY3Rpb24gKCkge1xuXHR2YXIgc2l6ZSA9IDA7XG5cdHZhciByZWNvcmRzID0gdGhpcy5nZXRBbGwoKTtcblxuXHRmb3IgKHZhciByZWNvcmQgaW4gcmVjb3Jkcykge1xuXHRcdHNpemUrKztcblx0fVxuXG5cdHJldHVybiBzaXplO1xufTtcblxuLyoqXG4gKiBHZXRzIGFuIGV4cGxpY2l0IGBQb3N0SXRgIGluc3RhbmNlLlxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcmV0dXJucyB7b2JqZWN0fHZvaWR9XG4gKi9cblxuTWFuYWdlci5nZXQgPSBmdW5jdGlvbiAoaWQpIHtcblx0cmV0dXJuIEZhY3RvcnkuZ2V0KGlkKSB8fCBjb25zb2xlLmVycm9yKGlkICsgJyBkb2VzIG5vdCBtYXRjaCBhbnkgYFBvc3RJdGAgaW5zdGFuY2VzLicpO1xufTtcblxuLyoqXG4gKiBHZXRzIGFsbCBgUG9zdEl0YCBpbnN0YW5jZXMuXG4gKiBAcmV0dXJucyB7b2JqZWN0fVxuICovXG5cbk1hbmFnZXIuZ2V0QWxsID0gZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gRmFjdG9yeS5nZXRBbGwoKTtcbn07XG5cbi8qKlxuICogQHNlZSB7QGxpbmsgcG9zdGl0Lm1kI1Bvc3RJdCtvbn0gZm9yIGZ1cnRoZXIgaW5mb3JtYXRpb24gKHNpZ25hdHVyZSwgZXRjLikuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEByZXR1cm5zIHtvYmplY3R9XG4gKiBAcHVibGljXG4gKi9cblxuTWFuYWdlci5vbiA9IGZ1bmN0aW9uIChpZCwgZXZlbnQsIGxpc3RlbmVyKSB7XG5cdHZhciB0aGF0ID0gdGhpcztcblx0dmFyIHJlY29yZCA9IHRoYXQuZ2V0KGlkKTtcblxuXHRpZiAoIXJlY29yZCkge1xuXHRcdHJldHVybiB0aGF0O1xuXHR9XG5cblx0cmVjb3JkLm9uKGV2ZW50LCBsaXN0ZW5lcik7XG5cblx0cmV0dXJuIHRoYXQ7XG59O1xuXG4vKipcbiAqIEBzZWUge0BsaW5rIHBvc3RpdC5tZCNQb3N0SXQrb2ZmfSBmb3IgZnVydGhlciBpbmZvcm1hdGlvbiAoc2lnbmF0dXJlLCBldGMuKS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHJldHVybnMge29iamVjdH1cbiAqIEBwdWJsaWNcbiAqL1xuXG5NYW5hZ2VyLm9mZiA9IGZ1bmN0aW9uIChpZCwgZXZlbnQsIGxpc3RlbmVyKSB7XG5cdHZhciB0aGF0ID0gdGhpcztcblx0dmFyIHJlY29yZCA9IHRoYXQuZ2V0KGlkKTtcblxuXHRpZiAoIXJlY29yZCkge1xuXHRcdHJldHVybiB0aGF0O1xuXHR9XG5cblx0cmVjb3JkLm9mZihldmVudCwgbGlzdGVuZXIpO1xuXG5cdHJldHVybiB0aGF0O1xufTtcblxuLyoqXG4gKiBAc2VlIHtAbGluayBwb3N0aXQubWQjUG9zdEl0K2VtaXR9IGZvciBmdXJ0aGVyIGluZm9ybWF0aW9uIChzaWduYXR1cmUsIGV0Yy4pLlxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcmV0dXJucyB7b2JqZWN0fVxuICogQHB1YmxpY1xuICovXG5cbk1hbmFnZXIuZW1pdCA9IGZ1bmN0aW9uIChpZCwgZXZlbnQsIHRhcmdldCwgbWVzc2FnZSwgb3JpZ2luKSB7XG5cdHZhciB0aGF0ID0gdGhpcztcblx0dmFyIHJlY29yZCA9IHRoYXQuZ2V0KGlkKTtcblxuXHRpZiAoIXJlY29yZCkge1xuXHRcdHJldHVybiB0aGF0O1xuXHR9XG5cblx0cmVjb3JkLmVtaXQoZXZlbnQsIHRhcmdldCwgbWVzc2FnZSwgb3JpZ2luKTtcblxuXHRyZXR1cm4gdGhhdDtcbn07XG5cbi8qKlxuICogQHNlZSB7QGxpbmsgaGVscGVycy5tZCNoZWxwZXJzLm9wZW5XaW5kb3d9IGZvciBmdXJ0aGVyIGluZm9ybWF0aW9uIChzaWduYXR1cmUsIGV0Yy4pLlxuICogQHB1YmxpY1xuICovXG5cbk1hbmFnZXIub3BlbldpbmRvdyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdHJldHVybiBoZWxwZXJzLm9wZW5XaW5kb3cob3B0aW9ucyB8fCB7fSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEhlbHBlcnMgTW9kdWxlLlxuICogQHB1YmxpY1xuICovXG5cbnZhciBoZWxwZXJzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLyoqXG4gKiBTZXJpYWxpemUgYW4gb2JqZWN0IGludG8gYSBmb3JtYXR0ZWQgc3RyaW5nLlxuICogQHBhcmFtIHtvYmplY3R9IHBhcmFtc1xuICogQHJldHVybnMge3N0cmluZ31cbiAqIEBwdWJsaWNcbiAqL1xuXG5oZWxwZXJzLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0dmFyIF9wYXJhbXMgPSBbXTtcblxuXHRmb3IgKHZhciBwYXJhbSBpbiBwYXJhbXMpIHtcblx0XHRfcGFyYW1zLnB1c2gocGFyYW0gKyAnPScgKyBwYXJhbXNbcGFyYW1dKTtcblx0fVxuXG5cdHJldHVybiBfcGFyYW1zLmpvaW4oJywgJyk7XG59O1xuXG4vKipcbiAqIE1lcmdlcyBhIHNoYWxsb3cgYHNvdXJjZWAgb2JqZWN0IGludG8gdGhlIGBkZXN0aW5hdGlvbmAgb2JqZWN0LlxuICogQHBhcmFtIHtvYmplY3R9IGRlc3RpbmF0aW9uXG4gKiBAcGFyYW0ge29iamVjdH0gc291cmNlXG4gKiBAcmV0dXJucyB7b2JqZWN0fVxuICogQHB1YmxpY1xuICovXG5cbmhlbHBlcnMuc2hhbGxvd01lcmdlID0gZnVuY3Rpb24gKGRlc3RpbmF0aW9uLCBzb3VyY2UpIHtcblx0Zm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpIHtcblx0XHRpZiAobnVsbCAhPSBzb3VyY2VbcHJvcF0pIHtcblx0XHRcdGRlc3RpbmF0aW9uW3Byb3BdID0gc291cmNlW3Byb3BdO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBkZXN0aW5hdGlvbjtcbn07XG5cbi8qKlxuICogTG9hZHMgYSByZXNvdXJjZSBpbnRvIGEgbmV3IGJyb3dzaW5nIGNvbnRleHQgKGB3aW5kb3dgKS5cbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zXG4gKiBAc2VlIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2luZG93L29wZW58V2luZG93Lm9wZW4oKX0gZm9yIG1vcmUgb3B0aW9ucy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnVybFxuICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMudGl0bGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBvcHRpb25zLndpZHRoXG4gKiBAcGFyYW0ge251bWJlcn0gb3B0aW9ucy5oZWlnaHRcbiAqIEByZXR1cm5zIHtvYmplY3R9XG4gKiBAcHVibGljXG4gKi9cblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmhlbHBlcnMub3BlbldpbmRvdyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdHZhciB0aGF0ID0gdGhpcztcblx0dmFyIG5hdGl2ZVNjcmVlbiA9IHNjcmVlbiB8fCB7fTtcblx0dmFyIG5hdGl2ZVdpbmRvdyA9IHdpbmRvdztcblx0dmFyIG5hdGl2ZURvY3VtZW50ID0gZG9jdW1lbnQ7XG5cdHZhciBuYXRpdmVEb2N1bWVudEVsZW1lbnQgPSBuYXRpdmVEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHwge307XG5cdHZhciBkdWFsU2NyZWVuTGVmdCA9IG5hdGl2ZVdpbmRvdy5zY3JlZW5MZWZ0IHx8IG5hdGl2ZVNjcmVlbi5sZWZ0IHx8IDA7XG5cdHZhciBkdWFsU2NyZWVuVG9wID0gbmF0aXZlV2luZG93LnNjcmVlblRvcCB8fCBuYXRpdmVTY3JlZW4udG9wIHx8IDA7XG5cdHZhciB3aWR0aCA9IG5hdGl2ZVdpbmRvdy5pbm5lcldpZHRoIHx8IG5hdGl2ZURvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCB8fCBuYXRpdmVTY3JlZW4ud2lkdGggfHwgMDtcblx0dmFyIGhlaWdodCA9IG5hdGl2ZVdpbmRvdy5pbm5lckhlaWdodCB8fCBuYXRpdmVEb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8IG5hdGl2ZVNjcmVlbi5oZWlnaHQgfHwgMDtcblx0dmFyIGxlZnQgPSAoKHdpZHRoIC8gMikgLSAob3B0aW9ucy53aWR0aCAvIDIpKSArIGR1YWxTY3JlZW5MZWZ0O1xuXHR2YXIgdG9wID0gKChoZWlnaHQgLyAyKSAtIChvcHRpb25zLmhlaWdodCAvIDIpKSArIGR1YWxTY3JlZW5Ub3A7XG5cdHZhciBmZWF0dXJlcyA9IHRoYXQuc2VyaWFsaXplKHRoYXQuc2hhbGxvd01lcmdlKHtcblx0XHR0b3A6IHRvcCxcblx0XHRsZWZ0OiBsZWZ0XG5cdH0sIG9wdGlvbnMpKTtcblx0dmFyIG5ld1dpbmRvdyA9IG5hdGl2ZVdpbmRvdy5vcGVuKG9wdGlvbnMudXJsLCBvcHRpb25zLnRpdGxlLCBmZWF0dXJlcyk7XG5cblx0aWYgKG5hdGl2ZVdpbmRvdy5mb2N1cykge1xuXHRcdG5ld1dpbmRvdy5mb2N1cygpO1xuXHR9XG5cblx0cmV0dXJuIG5ld1dpbmRvdztcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogUG9zdEl0IE1vZHVsZS5cbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcHVibGljXG4gKi9cblxudmFyIFBvc3RJdCA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGlkKSB7XG5cdHRoaXMuaWQgPSBpZDtcblx0dGhpcy50b2tlbiA9IDA7XG5cdHRoaXMubGlzdGVuZXJzID0ge307XG59O1xuXG4vKipcbiAqIFJlZ2lzdGVycyBgLnBvc3RNZXNzYWdlYCBldmVudCBsaXN0ZW5lcnMuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGxpc3RlbmVyXG4gKiBAcmV0dXJucyB7b2JqZWN0fVxuICogQHB1YmxpY1xuICovXG5cblBvc3RJdC5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnQsIGxpc3RlbmVyKSB7XG5cdHZhciB0aGF0ID0gdGhpcztcblxuXHR0aGF0Lmxpc3RlbmVyc1tldmVudF0gPSB0aGF0Lmxpc3RlbmVyc1tldmVudF0gfHwgW107XG5cblx0dmFyIHdyYXBMaXN0ZW5lciA9IGZ1bmN0aW9uIChldnQpIHtcblx0XHR2YXIgZGF0YSA9IG51bGw7XG5cblx0XHRpZiAoL19fZXZlbnRcXHM/XCIvLnRlc3QoZXZ0LmRhdGEpKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRkYXRhID0gSlNPTi5wYXJzZShldnQuZGF0YSk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnIpO1xuXG5cdFx0XHRcdGRhdGEgPSB7fTtcblx0XHRcdH1cblxuXHRcdFx0ZXZ0LmRhdGFQYXJzZWQgPSBkYXRhO1xuXHRcdH1cblxuXHRcdGlmICgnKicgPT09IGV2ZW50KSB7XG5cdFx0XHRyZXR1cm4gbGlzdGVuZXIuY2FsbCh0aGlzLCBldnQpO1xuXHRcdH1cblxuXHRcdGlmICghZGF0YSB8fFxuXHRcdFx0ZXZlbnQgIT09IGRhdGEuX19ldmVudCB8fFxuXHRcdFx0dGhhdC5pZCAhPT0gZGF0YS5fX2lkIHx8XG5cdFx0XHQnbnVsbCcgIT09IGV2dC5vcmlnaW4gJiYgLTEgPT09IGRhdGEuX19vcmlnaW4uaW5kZXhPZihldnQub3JpZ2luKVxuXHRcdCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGxpc3RlbmVyLmNhbGwodGhpcywgZXZ0KTtcblx0fTtcblxuXHRsaXN0ZW5lci5fX3Rva2VuID0gd3JhcExpc3RlbmVyLl9fdG9rZW4gPSB0aGF0LnRva2VuKys7XG5cblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB3cmFwTGlzdGVuZXIsIGZhbHNlKTtcblx0dGhhdC5saXN0ZW5lcnNbZXZlbnRdLnB1c2god3JhcExpc3RlbmVyKTtcblxuXHRyZXR1cm4gdGhhdDtcbn07XG5cbi8qKlxuICogVW5yZWdpc3RlcnMgKGFsbCB8IGV4cGxpY2l0KSBgLnBvc3RNZXNzYWdlYCBldmVudCBsaXN0ZW5lcnMuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb249fSBsaXN0ZW5lclxuICogQHJldHVybnMge29iamVjdH1cbiAqIEBwdWJsaWNcbiAqL1xuXG5Qb3N0SXQucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uIChldmVudCwgbGlzdGVuZXIpIHtcblx0dmFyIHRoYXQgPSB0aGlzO1xuXHR2YXIgbGlzdGVuZXJzID0gdGhhdC5saXN0ZW5lcnNbZXZlbnRdIHx8IFtdO1xuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgKytpKSB7XG5cdFx0aWYgKCFsaXN0ZW5lciB8fCBsaXN0ZW5lci5fX3Rva2VuID09PSBsaXN0ZW5lcnNbaV0uX190b2tlbikge1xuXHRcdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsaXN0ZW5lcnNbaV0sIGZhbHNlKTtcblx0XHRcdGxpc3RlbmVycy5zcGxpY2UoaSwgMSk7XG5cblx0XHRcdC0taTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdGhhdDtcbn07XG5cbi8qKlxuICogRW1pdHMgZXhwbGljaXQgYG1lc3NhZ2VgIGV2ZW50cywgdXNpbmcgdGhlIGNsaWVudCdzIGAucG9zdE1lc3NhZ2VgIGVtaXR0ZXIuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7b2JqZWN0fSB0YXJnZXRcbiAqIEBwYXJhbSB7c3RyaW5nfGFycmF5fG9iamVjdH0gbWVzc2FnZVxuICogQHBhcmFtIHtzdHJpbmd9IG9yaWdpblxuICogQHJldHVybnMge29iamVjdH1cbiAqIEBwdWJsaWNcbiAqL1xuXG5Qb3N0SXQucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCwgbWVzc2FnZSwgb3JpZ2luKSB7XG5cdHZhciB0aGF0ID0gdGhpcztcblx0dmFyIGV2ZW50T3JpZ2luID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG5cblx0c3dpdGNoIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWVzc2FnZSkpIHtcblx0XHRjYXNlICdbb2JqZWN0IEZ1bmN0aW9uXSc6XG5cdFx0XHRjb25zb2xlLmVycm9yKG1lc3NhZ2UgKyAnIHNob3VsZCBlaXRoZXIgYmUgYW4gYE9iamVjdGAsIGBBcnJheWAgb3IgYFN0cmluZ2AuJyk7XG5cblx0XHRcdHJldHVybiB0aGF0O1xuXG5cdFx0Y2FzZSAnW29iamVjdCBPYmplY3RdJzpcblx0XHRcdG1lc3NhZ2UuX19pZCA9IHRoYXQuaWQ7XG5cdFx0XHRtZXNzYWdlLl9fZXZlbnQgPSBldmVudDtcblx0XHRcdG1lc3NhZ2UuX19vcmlnaW4gPSBldmVudE9yaWdpbjtcblx0XHRcdG1lc3NhZ2UgPSBKU09OLnN0cmluZ2lmeShtZXNzYWdlKTtcblxuXHRcdFx0YnJlYWs7XG5cblx0XHRkZWZhdWx0OlxuXHRcdFx0bWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0X192YWx1ZTogbWVzc2FnZSxcblx0XHRcdFx0X19pZDogdGhhdC5pZCxcblx0XHRcdFx0X19ldmVudDogZXZlbnQsXG5cdFx0XHRcdF9fb3JpZ2luOiBldmVudE9yaWdpblxuXHRcdFx0fSk7XG5cdH1cblxuXHR0YXJnZXQucG9zdE1lc3NhZ2UobWVzc2FnZSwgb3JpZ2luKTtcblxuXHRyZXR1cm4gdGhhdDtcbn07XG4iXX0=\n(2)\n});\n"],"sourceRoot":"/source/"}