/*
 * PostIt v0.1.0
 * Copyright 2015 coopersemantics
 * Available under MIT license <https://github.com/outbrain/postit/LICENSE>
 * @Date Wed Jun 24 2015 17:09:11 GMT-0400 (EDT)
 */
!function e(t,n,r){function i(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";var r=e("./postit"),i={},o=null,s=t.exports={};s.create=function(e){return o=i[e],o?o:i[e]=new r(e)}},{"./postit":5}],2:[function(e,t,n){"use strict";window.PostIt=e("./manager")},{"./manager":4}],3:[function(e,t,n){"use strict";var r=t.exports={};r.serialize=function(e){var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join(", ")},r.shallowMerge=function(e,t){for(var n in t)null!=t[n]&&(e[n]=t[n]);return e},r.openWindow=function(e){var t=this,n=screen||{},r=window,i=document,o=i.documentElement||{},s=r.screenLeft||n.left||0,u=r.screenTop||n.top||0,a=r.innerWidth||o.clientWidth||n.width||0,c=r.innerHeight||o.clientHeight||n.height||0,f=a/2-e.width/2+s,l=c/2-e.height/2+u,v=t.serialize(t.shallowMerge({top:l,left:f},e)),h=r.open(e.url,e.title,v);return r.focus&&h.focus(),h}},{}],4:[function(e,t,n){"use strict";var r=e("./factory"),i=e("./helpers"),o={},s=t.exports={};s.add=function(e){var t=this;return o[e]={instance:r.create(e)},t},s.remove=function(e){var t=this,n=o[e],r=n.instance;for(var i in r.listeners)for(var s=0;s<r.listeners[i].length;++s)r.off(i,r.listeners[i][s]);return delete o[e],t},s.removeAll=function(){var e=this;for(var t in o)e.remove(t);return e},s.size=function(){var e=0;for(var t in o)e+=1;return e},s.on=function(e,t,n){var r=o[e];return r.instance.on(t,n),this},s.off=function(e,t,n){var r=o[e];return r.instance.off(t,n),this},s.emit=function(e,t,n,r,i){var s=o[e];return s.instance.emit(t,n,r,i),this},s.openWindow=function(e){return i.openWindow(e)},s.__records=o},{"./factory":1,"./helpers":3}],5:[function(e,t,n){"use strict";var r=t.exports=function(e){this.id=e,this.token=0,this.listeners={}};r.prototype.on=function(e,t){var n,r=this;r.listeners[e]||(r.listeners[e]=[]);var i=function(i){if("*"===e)return t.call(this,i);if(/__event/.test(i.data)){try{n=JSON.parse(i.data)}catch(o){return}i.dataParsed=n,e===n.__event&&r.id===n.__id&&t.call(this,i)}};return t.__token=i.__token=r.token++,window.addEventListener("message",i,!1),r.listeners[e].push(i),r},r.prototype.off=function(e,t){var n,r=this,i=r.listeners[e]||[];if(t){for(var o=0;o<i.length;++o)t.__token===i[o].__token&&(window.removeEventListener("message",i[o],!1),i.splice(o,1));return r}for(;n=i.shift();)window.removeEventListener("message",n,!1);return r},r.prototype.emit=function(e,t,n,r){var i=this;switch(Object.prototype.toString.call(n)){case"[object Function]":return console.error("`message` should either be an Object or a String.");case"[object Object]":n.__event=e,n.__id=i.id,n=JSON.stringify(n);break;default:n=JSON.stringify({__value:n,__id:i.id,__event:e})}return t.postMessage(n,r),i}},{}]},{},[2]);