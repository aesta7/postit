/*
 * PostIt v0.2.0
 * Copyright 2015 coopersemantics
 * Available under MIT license <https://github.com/outbrain/postit/LICENSE>
 * @Date Tue Jul 07 2015 10:19:06 GMT-0400 (EDT)
 */
!function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return i(r?r:e)},c,c.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){"use strict";var n=e("./postit"),i={},o=t.exports={};o.create=function(e){var t=i[e];return t?t:i[e]=new n(e)},o.destroy=function(e){delete i[e]}},{"./postit":5}],2:[function(e,t,r){"use strict";window.PostIt=e("./manager")},{"./manager":4}],3:[function(e,t,r){"use strict";var n=t.exports={};n.serialize=function(e){var t=[];for(var r in e)t.push(r+"="+e[r]);return t.join(", ")},n.shallowMerge=function(e,t){for(var r in t)null!=t[r]&&(e[r]=t[r]);return e},n.openWindow=function(e){var t=this,r=screen||{},n=window,i=document,o=i.documentElement||{},s=n.screenLeft||r.left||0,a=n.screenTop||r.top||0,u=n.innerWidth||o.clientWidth||r.width||0,c=n.innerHeight||o.clientHeight||r.height||0,f=u/2-e.width/2+s,l=c/2-e.height/2+a,h=t.serialize(t.shallowMerge({top:l,left:f},e)),v=n.open(e.url,e.title,h);return n.focus&&v.focus(),v}},{}],4:[function(e,t,r){"use strict";var n=e("./factory"),i=e("./helpers"),o={},s=t.exports={};s.add=function(e){var t=this;return"string"!=typeof e?console.error("`id` should be a `String`."):(o[e]={instance:n.create(e)},t)},s.remove=function(e){var t=this,r=t.get(e);if(r){var i=r.instance;for(var s in i.listeners)for(var a=0;a<i.listeners[s].length;++a)i.off(s,i.listeners[s][a]);return n.destroy(e),delete o[e],t}},s.removeAll=function(){var e=this;for(var t in o)e.remove(t);return e},s.size=function(){var e=0;for(var t in o)e++;return e},s.get=function(e){return o[e]||console.error("`id` does not match any `PostIt` instances.")},s.getAll=function(e){return o},s.on=function(e,t,r){var n=this.get(e);if(n)return n.instance.on(t,r),this},s.off=function(e,t,r){var n=this.get(e);if(n)return n.instance.off(t,r),this},s.emit=function(e,t,r,n,i){var o=this.get(e);if(o)return o.instance.emit(t,r,n,i),this},s.openWindow=function(e){return i.openWindow(e||{})},s.__records=o},{"./factory":1,"./helpers":3}],5:[function(e,t,r){"use strict";var n=t.exports=function(e){this.id=e,this.token=0,this.listeners={}};n.prototype.on=function(e,t){var r,n=this;n.listeners[e]||(n.listeners[e]=[]);var i=function(i){if("*"===e)return t.call(this,i);if(/__event/.test(i.data)){try{r=JSON.parse(i.data)}catch(o){return}i.dataParsed=r,e===r.__event&&n.id===r.__id&&t.call(this,i)}};return t.__token=i.__token=n.token++,window.addEventListener("message",i,!1),n.listeners[e].push(i),n},n.prototype.off=function(e,t){var r,n=this,i=n.listeners[e]||[];if(t){for(var o=0;o<i.length;++o)t.__token===i[o].__token&&(window.removeEventListener("message",i[o],!1),i.splice(o,1));return n}for(;r=i.shift();)window.removeEventListener("message",r,!1);return n},n.prototype.emit=function(e,t,r,n){var i=this;switch(Object.prototype.toString.call(r)){case"[object Function]":return console.error("`message` should either be an `Object`, `Array` or a `String`.");case"[object Object]":r.__event=e,r.__id=i.id,r=JSON.stringify(r);break;default:r=JSON.stringify({__value:r,__id:i.id,__event:e})}return t.postMessage(r,n),i}},{}]},{},[2]);